(function(){"use strict";var e,t,n,i;e=jQuery,t=e.q,i={},n=window.wp.hooks,function(){var n,i;n=function(){function n(){}return n.prototype.reload=function(){return t(".js__masonry").masonry("layout")},n.prototype.selected=function(){return this.all(),t(".ca-image").filter(function(){return 1!==e(this).find(".is-selected").length}).css("display","none"),this.reload()},n.prototype.unselected=function(){return this.all(),t(".ca-image").filter(function(){return 1===e(this).find(".is-selected").length}).css("display","none"),this.reload()},n.prototype.all=function(){return t(".ca-image").css("display",""),this.reload()},n}(),i=new n,t(".js__ca-action").on("click",function(){var n,a;return n=e(this),(a=n.data("action"))?(t(".js__ca-action").removeClass("is-active"),n.addClass("is-active"),i[a]()):void 0})}.call(this),function(){var i,a,o;1===t("#ca-preview").length&&(i=-1,n.addAction("theme.resized",function(){i=-1}),a=function(){return t("#ca-preview").css("display","none")},o=function(e,n){var a,o,r,l;if(o=t("#ca-image-"+e),1===o.length){if(i===e)return void t("#ca-preview").css("display","block");a=o.find("img"),t("#ca-preview-content").html(a.clone()),l=n.offset(),r=n.outerHeight(),t("#ca-preview").css({top:l.top+r+2,left:l.left,display:"block"}),i=e}},t(".ca-preview-link").on("mouseenter",function(){var t,n,i;return t=e(this),n=t.text(),i=n.replace(/[^0-9]/g,""),o(i,t)}),t(".ca-preview-link").on("mouseleave",a))}.call(this),function(){var i,a,o,r,l,s,c,u,d,f,p;a=null,i=null,o=null,r="",d=function(){var t;return t=[],a.each(function(n,i){var a,o,r;return a=e(i),o=a.find(".js__filter_src"),r=o.text(),t.push({id:a.attr("id"),title:r,el:a.get(0)})}),t},c=function(e,t){var n,i,a,o;for(o=[],n=0,a=e.length;a>n;n++)i=e[n],t.test(i.title)&&o.push(i);return o},s=function(e){var n,l,s,u,d,f,p;if(f=i.val(),f!==r){if(r=f,f.length<1)return a.css("display",""),void t(".masonry").masonry();for(u=o,d=f.split(" "),l=0,s=d.length;s>l;l++)p=d[l],u=c(u,new RegExp(p,"i"));return u.length>0?(n=_.pluck(u,"el"),a.css("display","").not(n).css("display","none"),i.removeClass("not-found")):(a.css("display",""),i.addClass("not-found")),t(".masonry").masonry()}},p=_.throttle(s,750),f=function(e){return i.removeClass("not-found")},l=function(){return i=e("#js__filter-input"),1===i.length?(i.off("keyup",p),i.off("blur",f),a=null,i=null,o=null,r=""):void 0},u=function(){return i=e("#js__filter-input"),1===i.length?(a=e(".js__filter_element"),o=d(),i.on("keyup",p),i.on("blur",f)):void 0},e(document).ready(u),n.addAction("client.filters/init",u),n.addAction("client.filters/destroy",l)}.call(this),function(){var n,i,a;if((null==window.ajax_object||null==window.ajax_object.ajax_url)&&"undefined"!=typeof console&&null!==console&&null!=console.log)throw new Error("Ajax Object is required for Village Client Area");i=function(e,t){return 0===t?e.removeClass("is-selected"):e.addClass("is-selected")},a=function(e,t){return t=0===t?1:0,i(e,t),n(e)},n=function(e){var n,i,a;return i=e.data("imageId"),i||(i=0),n=t(".ca-error__message.js__template").clone().removeClass("js__template"),a=n.text(),a=a.replace("##image_id##","#"+i),n.text(a),n.css("opacity",0).appendTo(t(".ca-error__container")).velocity({properties:{translateY:[0,10],opacity:[1,0]},options:{duration:600}}),n.velocity({properties:"fadeOut",options:{duration:2e3,delay:3e3,easing:"easeInOutQuad",complete:function(){n.remove(),n=null}}})},e(".ca-image .ca-image__meta").on("click",function(){var t,n,o,r,l,s;return n=e(this),(r=n.data("imageId"))?(l=n.is(".is-selected")?0:1,n.addClass("is-loading"),o={action:"vca_save_state",attachment_id:r,attachment_state:l},s={type:"POST",url:ajax_object.ajax_url,data:o,dataType:"json",success:function(e){return n.removeClass("is-loading")}},t=e.ajax(s),i(n,l),t.fail(function(){return a(n,l)})):void console.log("AJAX Error: Can't select/unselect an image without an ID")})}.call(this)}).call(this);